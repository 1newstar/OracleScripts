====================================================================
Tablespace, Table and Partition Compression in MOD and RTT Databases
====================================================================


Introduction
============

Using MOD and RTT as examples, find out the following:

*   Where do we use compression?
*   What options do we have to uncompressing those affected objects?
*   How can it be done with minimal disruption?

Investigation
=============

Oracle allows compression at tablespace, table, partition and subpartition levels. Indexes may also be compressed, but this is a different compression system.

The following query will identify tablespaces where the configuration forces compression on tables etc by default:

..  code-block:: sql

    select tablespace_name, def_tab_compression, compress_for
    from dba_tablespaces
    where def_tab_compression <> 'DISABLED'
    order by 1;
    
The following query identifies tables which have been compressed, specifically, and what compression method is in use:

..  code-block:: sql

    select owner, table_name, partitioned, compression, compress_for
    from dba_tables
    where compression = 'ENABLED'
    order by 1,2;
    
The following query identifies tables which have been compressed, specifically, and what compression method is in use:

..  code-block:: sql

    select owner, table_name, compression, compress_for
    from dba_tables
    where compression = 'ENABLED'
    order by 1,2;
    
The following query identifies partitioned tables which have been compressed, specifically, and what compression method is in use:

..  code-block:: sql

    select table_owner, table_name, partition_name, compression, compress_for
    from dba_tab_partitions
    where compression = 'ENABLED'
    order by 1,2;
        
We do not appear to utilise sub-partitioned tables, so these are not considered.


Where do we use Compression?
============================

Compression is used in a number of places within MOD and RTT. Some use BASIC compression while others use OLTP.

**NOTE:**   *It should be noted that in many tables, OLTP compression is in use. This can only be used when the Advanced Compression Option has been licensed. Any tables currently using this option, where the Advanced Compression Option has not been licenced should be (almost) immediately either uncompressed or uncompressed and re-compressed with BASIC compression only, which is the default (free) option.*


MOD
---

Tablespaces
~~~~~~~~~~~

None of the MOD tablespaces have compression set as a default.

Tables
~~~~~~

The following tables are using compression:

+-------------+-----------------+
| OWNER       | TABLE NAME      |
+=============+=================+
| DBA_USER    | PTTN_CMD_RUN    |
+-------------+-----------------+
| DBA_USER    | PTTN_MGMT_LOG   |
+-------------+-----------------+
| MOD         | ACTV_POS_TBL    |
+-------------+-----------------+
| MOD         | CAR_SEQ_ALCN    |
+-------------+-----------------+
| MOD         | CLT_CLN_RQST    |
+-------------+-----------------+
| MOD         | CLT_SEQ_ALCN    |
+-------------+-----------------+
| MOD         | CLT_TMP_PADV    |
+-------------+-----------------+
| MOD         | POS_NODE_A      |
+-------------+-----------------+
| MOD         | POS_NODE_B      |
+-------------+-----------------+
| MOD         | POS_PSTCDE_A    |
+-------------+-----------------+
| MOD         | POS_PSTCDE_B    |
+-------------+-----------------+
| MOD         | POS_SORT_LVL_A  |
+-------------+-----------------+
| MOD         | POS_SORT_LVL_B  |
+-------------+-----------------+
| MOD         | RET_BCDE_GEND   |
+-------------+-----------------+
| MOD         | SHPMNT          |
+-------------+-----------------+
| MOD         | SHPMNT_ADDR     |
+-------------+-----------------+
| MOD         | SHPMNT_CNCT     |
+-------------+-----------------+
| MOD         | SHPMNT_ISTR     |
+-------------+-----------------+
| MOD         | SHPMNT_ITM_DETS |
+-------------+-----------------+
| MOD         | SHPMNT_LBL_BCDE |
+-------------+-----------------+
| MOD         | SHPMNT_LBL_CAR  |
+-------------+-----------------+
| MOD         | SHPMNT_LBL_INFO |
+-------------+-----------------+
| MOD         | SHPMNT_LBL_RTNG |
+-------------+-----------------+
| MOD         | SHPMNT_LBL_SRVC |
+-------------+-----------------+
| MOD         | SHPMNT_SRVC     |
+-------------+-----------------+
| MOD         | SHPMNT_TYP      |
+-------------+-----------------+
| MOD         | TMP_PADV        |
+-------------+-----------------+

Partitions
~~~~~~~~~~

There are no partitions that use compression.

RTT/PNET
--------

Tablespaces
~~~~~~~~~~~

The following tablespaces have been created with compression enabled as the default. Some are BASIC others are OLTP. This effectively means that any table created within these tablespaces will default to having some form of compression turned on, unless, the script to create the table specifically mentions ``NOCOMPRESS``.

+---------------------+-------------+
| TABLESPACE NAME     | COMPRESSION |
+=====================+=============+
| MIS_HOLD_DATA       | BASIC       |
+---------------------+-------------+
| MIS_HOLD_INDEX      | BASIC       |
+---------------------+-------------+
| NODE_DATA           | BASIC       |
+---------------------+-------------+
| NODE_INDEX          | BASIC       |
+---------------------+-------------+
| PCLIMG_GLOBAL_INDEX | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201303  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201508  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201510  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201512  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201601  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201602  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201603  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201604  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201606  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201607  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201608  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201610  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201701  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201702  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201703  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201704  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201705  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201706  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201707  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201708  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201709  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201710  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201711  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201712  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201801  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201802  | OLTP        |
+---------------------+-------------+
| PCLIMG_PART_201803  | OLTP        |
+---------------------+-------------+
| PCLSHP_DATA         | OLTP        |
+---------------------+-------------+
| PCLSHP_INDEX        | OLTP        |
+---------------------+-------------+
| PNET_COL            | OLTP        |
+---------------------+-------------+
| PNET_SMS            | OLTP        |
+---------------------+-------------+
| PNET_SMS_201711     | OLTP        |
+---------------------+-------------+
| PNET_SMS_201712     | OLTP        |
+---------------------+-------------+
| PNET_SMS_201801     | OLTP        |
+---------------------+-------------+
| PNET_SMS_201802     | OLTP        |
+---------------------+-------------+
| PNET_SMS_201803     | OLTP        |
+---------------------+-------------+
| PNET_STAGING        | OLTP        |
+---------------------+-------------+
| PNET_TRACKING       | OLTP        |
+---------------------+-------------+
| TOOLS               | OLTP        |
+---------------------+-------------+
| WEB_SERVICE_DATA    | BASIC       |
+---------------------+-------------+
| WEB_SERVICE_INDEX   | BASIC       |
+---------------------+-------------+

Tables
~~~~~~

The following  tables are using compression:

+---------------+--------------------------------+--------------+
| OWNER         | TABLE_NAME                     | COMPRESS_FOR |
+===============+================================+==============+
| AHMADKAS      | NODE_KEEPER_BKP                | BASIC        |
+---------------+--------------------------------+--------------+
| AHMADKAS      | RSRC_BKP                       | BASIC        |
+---------------+--------------------------------+--------------+
| AHMADKAS      | RSRC_BKP1                      | BASIC        |
+---------------+--------------------------------+--------------+
| AHMADKAS      | RSRC_ROLE_BKP                  | BASIC        |
+---------------+--------------------------------+--------------+
| AHMADKAS      | RSRC_ROLE_BKP1                 | BASIC        |
+---------------+--------------------------------+--------------+
| DBA_USER      | HMI_PTTN_MGMT_LOG              | BASIC        |
+---------------+--------------------------------+--------------+
| DBA_USER      | PTTN_CMD_RUN                   | BASIC        |
+---------------+--------------------------------+--------------+
| DBA_USER      | PTTN_MGMT_LOG                  | BASIC        |
+---------------+--------------------------------+--------------+
| DBA_USER      | RW_STAT_TABLE                  | OLTP         |
+---------------+--------------------------------+--------------+
| INFOSIM       | DG_LAGS                        | BASIC        |
+---------------+--------------------------------+--------------+
| INFOSIM       | DG_LAGS2                       | BASIC        |
+---------------+--------------------------------+--------------+
| INFOSIM       | DG_TRANSPORT                   | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | CLN_RQST_PROG_MIS_HOLD         | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | ERR$_CLN_RQST_PROG_MIS_HOLD    | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | ERR$_MFST_TRKG_EVT             | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | ERR$_PCLSHP_TRKG_MIS_HOLD      | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | ERR$_PCL_PROG_MIS_HOLD         | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | MFST_TRKG_EVT                  | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | PCLSHP_TRKG_MIS_HOLD           | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | PCL_PROG_MIS_HOLD              | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | S_PCL_PROG_UPD                 | BASIC        |
+---------------+--------------------------------+--------------+
| MIS_HOLD      | S_PCL_UPD                      | BASIC        |
+---------------+--------------------------------+--------------+
| PCLSHP        | PSTCDE_SCTR                    | OLTP         |
+---------------+--------------------------------+--------------+
| PCLSHP        | PSTCDE_SCTR_BRDR               | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | BCDE_CTL                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CAR_SEQ_ALCN                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CK_LOG                         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLN_ADDL_ATRBS                 | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLN_ADDL_SO                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLN_REF_XRF                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_BCDE_CTL                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_CLN_PRFC                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_CNCT                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_COST                       | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_CTRY                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DFLTS                      | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DFLT_ATRBS                 | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DFLT_SO                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DISC_CDE                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DLY_MTHD                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_DLY_PRFC                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_ETRY_PNT                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_GRP_EXTRD                  | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_IT_SOL                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_MGR                        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_PRCS                       | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_PRC_TYP                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_PUSH_TRIG                  | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_PUSH_TRIG_DDUP_TMP         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_PW                         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_RET_DETS                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_SEQ                        | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_SEQ_ALCN                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_SO                         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_STAT                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_STRM_ADDL_ATRBS            | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_TFC_STRM                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_THD_PTY_SFTWR              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CLT_TRKG_PNT                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CLT_TRKG_TYP                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CR_ADDL_SRVC                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CR_ETA_CFG                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CR_ETA_CFG_24SEPT              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | CR_GLBL_CFG                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | CTRY                           | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | DLY_MTHD                       | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | DLY_POT_MFST_SKEL_UPD_TMP      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | EML_MSG                        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | EML_TRIG                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | EML_TRIG_DDUP_TMP              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | EML_TRIG_PCLSHP_RMDR           | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_CLN_PROG                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_CLN_RQST_PROG             | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_CLT_PUSH_TRIG             | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_EML_TRIG                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_EML_TRIG_PCLSHP_RMDR      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_PCL                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_PCL_IMG                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_PCL_PROG                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | ERR$_S_PCL_PROG_RCYCL          | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | EXCEPTIONS                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | FLE_TFR_TME                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | HERMES_DPOT                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HERMES_ST                      | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HERMES_ST_TYP                  | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HHT_RSN                        | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HHT_RSN_SRVC                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HHT_RSN_TYP                    | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | HHT_SRVC_TYP                   | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | IT_SOL                         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | JOB_ASST                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | JOB_TTL                        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | LOCN                           | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | LOG                            | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | LOG_EVT                        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | MAX_KEY_SEQ_NBR                | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | MAX_KEY_TMESTP                 | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | MIH_PCLSHP_TRKG_DDUP_TMP       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | MV_POSTAL_REGIONS              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | NODE                           | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | NODE_DRVR                      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | NODE_DRVR_VAN_RTE              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | NODE_GRP                       | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | NODE_KEEPER                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | NODE_ROLE                      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_ADDL_ATRBS                 | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_ADDL_SO                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_BCDE                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_DDUP_TMP                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_HIST                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_IMG_DDUP_TMP               | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PCL_PROG_DDUP_TMP              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PLAN_TABLE                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PRTR_LKUP                      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | PW_TYP                         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | RETS_CLT_ACTV                  | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | RSRC                           | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | RSRC_ROLE                      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | RSRC_ROLE_BKP1                 | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | SAO_S_HHT_TRKG_PROGRESS        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | SMS_RMDR_TRKG_PNT              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | SMS_TRIG_DDUP_TMP              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | SO                             | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | SPLR                           | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | STRM_ADDL_ATRBS                | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | STTD_DAY_GRP_CLN               | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | STTD_DAY_GRP_DLY               | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | STTD_DAY_GRP_MFST              | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | S_CLT_PUSH_TRIG                | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | S_CLT_TRKG                     | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | S_DSRPTN_LOG                   | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | S_EML_TRIG                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | S_HHT_TRKG                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | S_PCL_PROG_RCYCL_DDUP_TMP      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | S_TST_MFST_RQST                | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TASH_IVR_AUDIO_CDE             | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TASH_IVR_TRKG_PNT              | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TFC_STRM                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | THD_PTY_SFTWR                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TOAD_PLAN_TABLE                | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_ETA_CLT_WDW               | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_ETA_TFMN                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_ETA_TME_REF               | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_PNT_CRS_BORD_DESC         | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_PNT_DEFAULT_ADDL_INFO     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TRKG_TYP                       | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | TYP_LST                        | BASIC        |
+---------------+--------------------------------+--------------+
| PNET          | UPDTD_MFST_ENTR                | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | VAN_RTE                        | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | VAN_RTE_LOG                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET          | WEIGHT_MODS                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | CP_INV_SO_ORD                  | BASIC        |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | CR_FINL_PRD                    | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | CR_FRM_USRNME                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | CR_SRVC_RSLTS                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | CR_STNRY_RQST                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | ORA_CR_BNK                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | PLAN_TABLE                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_COL_PRD  | STNRY_DESC                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_RO       | MD_CONTROL                     | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_SMS      | ERR$_SMS_TRIG                  | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_SMS      | ERR$_SMS_TRIG_PCLSHP_RMDR      | OLTP         |
+---------------+--------------------------------+--------------+
| PNET_SMS      | SMS_TRIG_PCLSHP_RMDR           | BASIC        |
+---------------+--------------------------------+--------------+
| SYSMAN        | MGMT_METRICS                   | OLTP         |
+---------------+--------------------------------+--------------+
| SYSMAN        | MGMT_POLICIES                  | OLTP         |
+---------------+--------------------------------+--------------+

Partitions
~~~~~~~~~~

The following tables have partitions, also listed, which are compressed:

+-------------+-------------------+--------------------------------+--------------+
| TABLE_OWNER | TABLE_NAME        | PARTITION_NAME                 | COMPRESS_FOR |
+=============+===================+================================+==============+
| PCLSHP      | PCLSHP_DRVR_EVT   | PCLSHP_DRVR_EVT_201801         | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_DRVR_EVT   | PCLSHP_DRVR_EVT_201712         | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_DRVR_EVT   | PCLSHP_DRVR_EVT_201711         | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_DRVR_EVT   | PCLSHP_DRVR_EVT_201802         | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_DRVR_EVT   | PCLSHP_DRVR_EVT_201803         | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_RET_EVT    | PCLSHP_RET_EVT_201712          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_RET_EVT    | PCLSHP_RET_EVT_201802          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_RET_EVT    | PCLSHP_RET_EVT_201801          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_RET_EVT    | PCLSHP_RET_EVT_201711          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PCLSHP      | PCLSHP_RET_EVT    | PCLSHP_RET_EVT_201803          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201611      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201610      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201711      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201801      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201803      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201606      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201802      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201608      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201609      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_BCDE          | PNET_CLN_BCDE_PART_201712      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201802      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201801      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201606      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201712      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201803      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201711      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201610      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201608      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_PROG          | PNET_CLN_PROG_PART_201611      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201712 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201611 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201608 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201801 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201803 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201606 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201802 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201610 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | CLN_RQST_PROG     | PNET_CLN_RQST_PROG_PART_201711 | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PPNET_BCDE_PART_201712         | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PNET_BCDE_PART_201711          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PNET_BCDE_PART_201710          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PNET_BCDE_PART_201709          | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PPNET_BCDE_PART_201801         | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PPNET_BCDE_PART_201803         | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_BCDE_TEST     | PPNET_BCDE_PART_201802         | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201712            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201708            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201711            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201801            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201802            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_DIVN_DET      | PCL_DIVN_DET_201803            | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201606             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201508             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201711             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201608             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201512             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201602             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201603             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201702             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201607             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201712             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201704             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201709             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201303             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201802             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201705             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201703             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201710             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201701             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201604             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201803             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201708             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201706             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201610             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201707             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201601             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201510             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_IMG           | PCLIMG_PART_201801             | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201608      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201703      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201609      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201611      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201606      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201801      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201612      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201710      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201401      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201610      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201702      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201712      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201708      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201711      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201701      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201704      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201706      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201709      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201705      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201802      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | PCL_PROG          | PNET_PCL_PROG_PART_201803      | OLTP         |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201710        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201803        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201704        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201610        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201612        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201608        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201703        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201801        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201701        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201711        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201606        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201705        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201702        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201708        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201802        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201712        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201611        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+
| PNET        | RET_BCDE_CRS_REF  | RET_BCDE_CRS_REF_201709        | BASIC        |
+-------------+-------------------+--------------------------------+--------------+

   
    
Decompression
=============

Compressed objects can be decompressed *in-situ* however, the objects will be locked and completely unavailable for use. For this reason, it is advised that the decompression be carried out during a maintenance window when no-one else is accessing the tables.

It may also be advisable to reduce the amount of data in the affected tables prior to running the decompression as there will be a need for additional disc space when the objects are decompressed.

Tablespaces
-----------

To decompress a tablespace, the following command should be used:

..  code-block:: sql

    alter tablespace default NOCOMPRESS;

This simply changes the default for tables created within the tablespaces, the existing tables will require to be decompressed separately.

Tables
------

To decompress a table, it can be moved within the same tablespace with the following command:

..  code-block:: sql

    alter table <table name> 
    move NOCOMPRESS parallel 4 
    [update all indexes];

The `UPDATE ALL INDEXES`` clause will update all indexes on the affected table at the end of the move operation.
    
Partitions
----------
    
To decompress a table partition, it can be moved within the same tablespace with the following command:

..  code-block:: sql

    alter table <table name> partition <partition name> 
    move NOCOMPRESS parallel 4 
    [update all indexes];
    
The `UPDATE ALL INDEXES`` clause will update all indexes on the affected partition at the end of the move operation.
    
Rebuild Indexes
---------------    

After any of the above operations, all indexes on the table will be unusable and will require rebuilding if the UPDATE ALL INDEXES clause was not used above. The SQL to rebuild the indexes is:

..  code-block:: sql

    alter index <indexname> rebuild parallel 4 online;

This will not require to be carried out if the table or partition affected was moved with the ``UPDATE ALL INDEXES`` option as that causes the indexes to be updated.    

Gather Statistics
-----------------
    
Finally, table and/or partition statistics will have to be gathered again. 

Tables
~~~~~~

For tables the SQL is:

..  code-block:: sql

    begin 
        dbms_stats.gather_table_stats(
            ownname => 'table owner name', 
            tabname => 'table name', 
            cascade => true, 
            degree => 4); 
    end;

Partitions
~~~~~~~~~~   

For partitions, the SQL is:

..  code-block:: sql

    begin 
        dbms_stats.gather_table_stats(
            ownname => 'table owner name', 
            tabname => 'table name', 
            partname => 'partition name', 
            granularity => 'PARTITION', 
            cascade => true, 
            degree => 4); 
    end;    
    