==================================================
Azure Migration (Azure Database Refresh) Checklist
==================================================


+------------------------------------------------------------------------------------------------------+------------------+------------+
| **Action**                                                                                           | **Time HH:MM**   | **Done**   |
|                                                                                                      |                  |            |
|                                                                                                      |                  | **Y/N**    |
+======================================================================================================+==================+============+
| Set oracle environment correctly:                                                                    | **N/A**          |            |
|                                                                                                      |                  |            |
| ``oraenv <database_name>``                                                                           |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| ``set NLS_DATE_FORMAT=``                                                                             | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| ``cd ?:\MigrationRoot``                                                                              | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| TFS Checkout: RefreshScripts                                                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| TFS checkout: Scripts                                                                                | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Copy RefreshScripts to server ``MigrationRoot\RefreshScripts`` (overwrite)                           | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Copy Scripts to server ``MigrationRoot\Scripts`` (overwrite)                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Obtain Reconciliation scripts from production DBAs (Migration only) – **or**;                        | **N/A**          |            |
|                                                                                                      |                  |            |
| Copy Reconciliation scripts from TFS (Database Refresh only)                                         |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Copy Reconciliation scripts to server into ``Scripts`` folder (overwrite)                            | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Disable Data Guard – if in use (production, preproduction)                                           | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| ``Set SQLPATH="?:\MigrationRoot\RefreshScripts";"?:\MigrationRoot\Scripts"``                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Edit ``Scripts\T095_recreatePublicDBLinks.sql``                                                      | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Edit ``Scripts\T150a_create_roles.sql``                                                              | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Start SQL\*Plus as SYSDBA                                                                            | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\shutdownrestart.sql``                                                       |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\prerefresh.sql``                                                            |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check script's numerous log files, in MigrationRoot, for errors:                                     |                  |            |
|                                                                                                      |                  |            |
| -  create\_profiles.lst                                                                              |                  |            |
|                                                                                                      |                  |            |
| -  PreRefresh.lst                                                                                    |                  |            |
|                                                                                                      |                  |            |
| -  Grants.lst                                                                                        |                  |            |
|                                                                                                      |                  |            |
| -  DropPublicDBLinks.lst                                                                             |                  |            |
|                                                                                                      |                  |            |
| -  T095\_recreatePublic\_DB\_links.lst                                                               |                  |            |
|                                                                                                      |                  |            |
| -  Drop\_old\_users.lst                                                                              |                  |            |
|                                                                                                      |                  |            |
| -  Drop\_old\_users\_2.lst                                                                           |                  |            |
|                                                                                                      |                  |            |
| -  create\_users\_and\_roles.lst                                                                     |                  |            |
|                                                                                                      |                  |            |
| -  create\_tablespace\_quotas.lst                                                                    |                  |            |
|                                                                                                      |                  |            |
| -  create\_system\_privs.lst                                                                         |                  |            |
|                                                                                                      |                  |            |
| -  create\_proxies.lst                                                                               |                  |            |
|                                                                                                      |                  |            |
| -  create\_roles.lst                                                                                 |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check supplied export logfiles for errors. Just in case                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Import: ``parfiles\imp_NOROWS.par``                                                                  |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check ``logfiles\imp_NOROWS.log`` for errors                                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\post_import_norows.sql``                                                    |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Execute: ``batch_import_rows.bat`` (FCS9 will not be executed)                                       | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  NOFCS                                                                                             |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS1                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS2D                                                                                             |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS3                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS4                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS5                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS6                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS7                                                                                              |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| -  FCS8 (will partially fail)                                                                        |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check ``logfiles\imp_ROWS_*.log`` for errors                                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\drop_fcs_jobs.sql`                                                          | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Import: ``parfiles\imp_NOROWS_grants``                                                               |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check ``logfiles\imp_NOROWS_GRANTS.log`` for errors                                                  | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\drop_xml_stuff.sql``                                                        | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Import: ``parfiles\temp_fcs9.par``                                                                   |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\fix_xml_stuff.sql``                                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check ``logfiles\fix_xml_stuff.lst`` for errors                                                      |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\post_import_rows.sql``                                                      |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check numerous logs for errors:                                                                      | **N/A**          |            |
|                                                                                                      |                  |            |
| -  grants.lst                                                                                        |                  |            |
|                                                                                                      |                  |            |
| -  gather\_stats.lst                                                                                 |                  |            |
|                                                                                                      |                  |            |
| -  recompile.lst                                                                                     |                  |            |
|                                                                                                      |                  |            |
| -  materialised\_views.lst                                                                           |                  |            |
|                                                                                                      |                  |            |
| -  DropExternalTables.lst                                                                            |                  |            |
|                                                                                                      |                  |            |
| -  post\_import\_rows.lst                                                                            |                  |            |
|                                                                                                      |                  |            |
| -  11g\_QAS.lst                                                                                      |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| SQL: Set passwords on ``NORMAL_USER``/``SVC_AURA_SERV_ROLE`` (refresh only)                          | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``Scripts\T170_Create_public_synonyms.sql``                                                  | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\postRefresh.sql`` (Only if archivelogging required)                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| SQL: ``select * from fcs."UKFATCASubmissionFIRe98_TAB"``                                             | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\run_reconcilliation_scripts.sql``                                           | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Check script results                                                                                 | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``?\rdbms\admin\spcreate`` (if Statspack required)                                           | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\perfstat_autojob.sql`` (if Statspack required and regular snapshots needed) | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\perfstat_autopurge.sql`` (as above)                                         | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\checkSystemObjects.sql``                                                    | **N/A**          |            |
|                                                                                                      |                  |            |
| Also: ``RefreshScripts\MoveSystemObjects.sql`` (if necessary)                                        |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\MoveDefaultTablespace.sql``                                                 | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\MoveSystemObjects.sql`` (if required from above)                            | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Script: ``RefreshScripts\Create_fcs_scheduler_jobs.sql``                                             | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| SQL: Enable Scheduler jobs (Only if production)                                                      | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Scripts: (Only if production)                                                                        | **N/A**          |            |
|                                                                                                      |                  |            |
| ``RefreshScripts\Solaris_cronjobs.pks``                                                              |                  |            |
|                                                                                                      |                  |            |
| ``RefreshScripts\Solaris_cronjobs.pkb``                                                              |                  |            |
|                                                                                                      |                  |            |
| ``RefreshScripts\Scheduler_jobs.sql``                                                                |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Create standby database using RMAN (Only if production, preproduction)                               |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Configure Data Guard                                                                                 |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Configure RMAN backups                                                                               | **N/A**          |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
| Backup the database                                                                                  |                  |            |
+------------------------------------------------------------------------------------------------------+------------------+------------+
